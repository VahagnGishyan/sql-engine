
//////////////////////////////////////////////////////////////////////////
//                                                                      //
//////////////////////////////////////////////////////////////////////////

#pragma once

//////////////////////////////////////////////////////////////////////////

#include "interface/i-database.hpp"

//////////////////////////////////////////////////////////////////////////
//
//////////////////////////////////////////////////////////////////////////

namespace SQLEngine::CLI
{
    //////////////////////////////////////////////////////////////////////
    //                                                                  //
    //////////////////////////////////////////////////////////////////////

    class IOManager final
    {
       public:
        auto ReadUserInput(const std::string& prompt) const
            -> const std::vector<std::string>;
        void Print(const std::string& prompt) const;
        void PrintLine(const std::string& prompt) const;
        void PrintMessage(const std::vector<std::string>& content) const;
        void PrintError(const std::string& prompt) const;

       public:
        auto IsEnd(const std::vector<std::string>& input) const -> bool;
        auto GetEndValue() const -> const std::string;
        auto SetEndValue(const std::string& value);

       protected:
        std::string m_endValue = /*default-end-value*/ "--close";
    };

    //////////////////////////////////////////////////////////////////////
    //                                                                  //
    //////////////////////////////////////////////////////////////////////

    class Operation
    {
       public:
        virtual ~Operation() = default;

       public:
        virtual auto ExecuteFor(Interface::IConnectDataBase& db) const
            -> std::vector<std::string> = 0;
    };

    using UOperation = std::unique_ptr<Operation>;

    //////////////////////////////////////////////////////////////////////
    //                                                                  //
    //////////////////////////////////////////////////////////////////////

    UOperation ParseInput(const std::vector<std::string>& arguments);

    //////////////////////////////////////////////////////////////////////
    //                                                                  //
    //////////////////////////////////////////////////////////////////////
}  // namespace SQLEngine::CLI

//////////////////////////////////////////////////////////////////////////
//                                                                      //
//////////////////////////////////////////////////////////////////////////
